<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digita com o Byte! ğŸ¤–</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Decorative blobs -->
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>
<div class="blob blob-3"></div>

<!-- Stars -->
<div class="star" style="top:8%;left:10%;animation-delay:0s">â­</div>
<div class="star" style="top:15%;right:12%;animation-delay:1s">âœ¨</div>
<div class="star" style="top:60%;left:4%;animation-delay:2s">ğŸŒŸ</div>
<div class="star" style="top:75%;right:6%;animation-delay:0.5s">â­</div>
<div class="star" style="top:35%;right:3%;animation-delay:1.8s">âœ¨</div>

<!-- â•â• INTRO SCREEN â•â• -->
<div id="intro-screen">
  <div class="intro-card">
    <div style="font-size:80px;animation:celebBounce 1.5s ease-in-out infinite">ğŸ¤–</div>
    <h2>OlÃ¡! Eu sou o Byte!</h2>
    <p>Vou ajudar-te a aprender a <strong>escrever no teclado</strong> de forma divertida! ğŸ‰</p>
    <div class="intro-features">
      <div class="intro-feat">ğŸ”Š Ouves cada frase em voz alta</div>
      <div class="intro-feat">âŒ¨ï¸ Escreves letra a letra com ajuda</div>
      <div class="intro-feat">â­ Ganhas estrelas por cada frase</div>
      <div class="intro-feat">ğŸŠ Celebramos juntos cada vitÃ³ria!</div>
    </div>
    <p style="font-size:13px;color:#888;margin-bottom:18px">ğŸ’¡ Usa os auscultadores para ouvir melhor!</p>
    
    <div class="intro-actions">
      <button class="intro-start secondary" id="btn-continue" style="display:none" onclick="continueGame()">
        <span>â–¶ï¸</span> Continuar
      </button>
      <button class="intro-start" id="btn-start" onclick="startGame()">
        <span>ğŸš€</span> Vamos comeÃ§ar!
      </button>
    </div>

  </div>
</div>

<!-- â•â• MAIN APP â•â• -->
<div id="app" style="display:none">
  <header>
    <h1 id="secret-open">âŒ¨ï¸ Digita com o <span>Byte</span>! ğŸ¤–</h1>
    <div class="header-tools">
      <button class="tool-btn" id="toggle-sound" type="button" aria-pressed="true">ğŸ”Š Som: Ligado</button>
      <button class="tool-btn" id="toggle-teacher" type="button" aria-pressed="false">ğŸ‘©â€ğŸ« Modo sala: Desligado</button>
      <button class="tool-btn" id="open-teacher-panel" type="button" title="DefiniÃ§Ãµes do professor">âš™ï¸ Professor</button>
      <button class="tool-btn danger" id="reset-progress" type="button">ğŸ§¹ RecomeÃ§ar</button>
    </div>

  </header>

  <!-- Progress -->
  <div class="progress-wrap">
    <span class="progress-label">ğŸ“š Progresso</span>
    <div class="progress-bar-outer">
      <div class="progress-bar-inner" id="progress-bar" style="width:0%"></div>
    </div>
    <span class="stars-count" id="stars-count">â­ 0</span>
  </div>

  <!-- Level Selector -->
  <div id="level-selector" class="level-selector"></div>

  <!-- Main Panel -->
  <div class="main-panel">

    <!-- Byte Mascot -->
    <div class="byte-col" id="byte-col">
      <div class="byte-svg-wrap">
        <svg viewBox="0 0 110 130" xmlns="http://www.w3.org/2000/svg">
          <g class="byte-body-g">
            <!-- Antenna -->
            <line x1="55" y1="8" x2="55" y2="20" stroke="#4a90d9" stroke-width="3" stroke-linecap="round"/>
            <circle cx="55" cy="6" r="5" fill="#ffd93d" stroke="#e6b800" stroke-width="1.5"/>
            <!-- Head -->
            <rect x="22" y="20" width="66" height="52" rx="16" fill="#4a90d9" stroke="#2c5f8a" stroke-width="2"/>
            <!-- Screen/face area -->
            <rect x="28" y="26" width="54" height="36" rx="10" fill="#e8f4ff"/>
            <!-- Eyes -->
            <g class="byte-eye" style="transform-origin:39px 39px">
              <circle cx="39" cy="39" r="8" fill="white"/>
              <circle cx="39" cy="39" r="5" fill="#2c5f8a"/>
              <circle cx="41" cy="37" r="2" fill="white"/>
            </g>
            <g class="byte-eye" style="transform-origin:71px 39px">
              <circle cx="71" cy="39" r="8" fill="white"/>
              <circle cx="71" cy="39" r="5" fill="#2c5f8a"/>
              <circle cx="73" cy="37" r="2" fill="white"/>
            </g>
            <!-- Mouth (smile by default) -->
            <path id="byte-mouth" d="M 43 52 Q 55 62 67 52" stroke="#2c5f8a" stroke-width="2.5" fill="none" stroke-linecap="round"/>
            <!-- Ear buttons -->
            <circle cx="22" cy="45" r="5" fill="#ff6b6b" stroke="#c0392b" stroke-width="1.5"/>
            <circle cx="88" cy="45" r="5" fill="#4ecdc4" stroke="#16a085" stroke-width="1.5"/>
            <!-- Body -->
            <rect x="28" y="74" width="54" height="40" rx="12" fill="#4a90d9" stroke="#2c5f8a" stroke-width="2"/>
            <!-- Body panel -->
            <rect x="36" y="80" width="38" height="26" rx="8" fill="#3a80c9"/>
            <!-- Body lights -->
            <circle cx="44" cy="90" r="4" fill="#ffd93d"/>
            <circle cx="55" cy="90" r="4" fill="#ff6b6b"/>
            <circle cx="66" cy="90" r="4" fill="#4ecdc4"/>
            <!-- Arms -->
            <rect x="8" y="76" width="20" height="10" rx="5" fill="#4a90d9" stroke="#2c5f8a" stroke-width="1.5"/>
            <rect x="82" y="76" width="20" height="10" rx="5" fill="#4a90d9" stroke="#2c5f8a" stroke-width="1.5"/>
            <!-- Hands -->
            <circle cx="10" cy="81" r="6" fill="#ffd93d" stroke="#e6b800" stroke-width="1.5"/>
            <circle cx="100" cy="81" r="6" fill="#ffd93d" stroke="#e6b800" stroke-width="1.5"/>
            <!-- Legs -->
            <rect x="35" y="112" width="14" height="16" rx="6" fill="#3a80c9" stroke="#2c5f8a" stroke-width="1.5"/>
            <rect x="61" y="112" width="14" height="16" rx="6" fill="#3a80c9" stroke="#2c5f8a" stroke-width="1.5"/>
            <!-- Feet -->
            <rect x="32" y="124" width="20" height="8" rx="5" fill="#2c5f8a"/>
            <rect x="58" y="124" width="20" height="8" rx="5" fill="#2c5f8a"/>
          </g>
        </svg>
      </div>
      <div class="byte-bubble" id="byte-bubble">
        OlÃ¡! Estou pronto! ğŸ‰
      </div>
    </div>

    <!-- Game Col -->
    <div class="game-col">

      <!-- Level + audio row -->
      <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:10px;">
        <div class="level-badge" id="level-badge">ğŸ“– Letra: P</div>
        <button class="audio-btn" id="audio-btn" onclick="readSentence()">
          ğŸ”Š Ouvir frase
        </button>
      </div>

      <!-- Sentence display -->
      <div class="sentence-display">
        <div class="sentence-label">
          <span>ğŸ“</span> Frase a digitar:
        </div>
        <div class="sentence-chars" id="sentence-chars"></div>
      </div>

      <!-- Input -->
      <div class="input-area">
        <div class="input-label">âœï¸ Escreve aqui:</div>
        <div class="typing-input-wrap">
          <input type="text" id="typing-input"
            placeholder="Clica aqui e comeÃ§a a digitar..."
            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
          />
          <span class="input-icon" id="input-icon">âŒ¨ï¸</span>
        </div>
        <!-- Next key hint -->
        <div class="next-key" id="next-key-hint">
          <span class="next-key-label">ğŸ‘‰ PrÃ³xima tecla:</span>
          <div class="key-badge" id="next-key-badge">P</div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="btn-row">
        <button class="btn btn-primary" onclick="readSentence()" id="btn-read">
          ğŸ”Š Repetir
        </button>
        <button class="btn btn-secondary" onclick="skipSentence()" id="btn-skip">
          â­ï¸ Saltar
        </button>
        
        <button class="btn btn-secondary" onclick="restartSentence()">
          ğŸ” RecomeÃ§ar frase
        </button>
<button class="btn btn-secondary" onclick="clearInput()">
          ğŸ—‘ï¸ Apagar
        </button>
      </div>

      <!-- Mini scores -->
      <div class="mini-scores">
        <div class="score-chip">âœ… <span id="correct-count">0</span> certas</div>
        <div class="score-chip">âŒ <span id="error-count">0</span> erros</div>
        <div class="score-chip">ğŸ“Š NÃ­vel <span id="cur-level">1</span>/<span id="total-levels">1</span></div>
      </div>

    </div>
  </div>

  <!-- Finish screen -->
  <div id="finish-screen">
    <div style="font-size:90px;animation:celebBounce 1s ease-in-out infinite">ğŸ†</div>
    <h2>ParabÃ©ns, campeÃ£o! ğŸ‰</h2>
    <p style="font-size:18px;font-weight:700;color:#555;margin-bottom:16px">Completaste todos os nÃ­veis!</p>
    <div style="font-size:40px;margin:16px 0" id="final-stars-display"></div>
    <div style="background:white;border-radius:24px;padding:24px;box-shadow:var(--shadow);max-width:360px;margin:0 auto 24px">
      <p style="font-size:22px;font-weight:800;color:var(--byte-dark)">
        â­ <span id="final-stars">0</span> estrelas conquistadas!
      </p>
      <p style="font-size:16px;color:#888;margin-top:6px;font-weight:600">
        âœ… <span id="final-correct">0</span> frases certas &nbsp;â€¢&nbsp;
        âŒ <span id="final-errors">0</span> erros no total
      </p>
    </div>
    
    <div class="cert-box">
      <div class="cert-row">
        <label for="student-name" class="cert-label">ğŸ§’ Nome:</label>
        <input id="student-name" class="cert-input" type="text" placeholder="Escreve o teu nome" maxlength="32" />
      </div>
      <button class="intro-start secondary" style="max-width:300px;margin:10px auto 0" onclick="printCertificate()">
        ğŸ–¨ï¸ Imprimir certificado
      </button>
      <p class="cert-note">Dica: podes escrever o nome e imprimir para levar para casa.</p>
    </div>

<button class="intro-start" style="max-width:300px;margin:0 auto" onclick="restartGame()">
      ğŸ”„ Jogar outra vez!
    </button>
  </div>

</div>


<!-- â•â• TEACHER PANEL (PIN) â•â• -->
<div id="teacher-panel" class="modal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="teacher-title">
    <div class="modal-head">
      <div>
        <div class="modal-title" id="teacher-title">âš™ï¸ Painel do Professor</div>
        <div class="modal-sub">Estas opÃ§Ãµes ficam guardadas neste dispositivo.</div>
      </div>
      <button class="modal-close" type="button" onclick="closeTeacherPanel()">âœ–</button>
    </div>

    <div class="modal-grid">
      <label class="toggle">
        <input type="checkbox" id="opt-allow-skip">
        <span>Permitir â€œSaltarâ€</span>
      </label>

      <label class="toggle">
        <input type="checkbox" id="opt-show-nextkey" checked>
        <span>Mostrar â€œPrÃ³xima teclaâ€</span>
      </label>

      <label class="toggle">
        <input type="checkbox" id="opt-big-font">
        <span>Letra maior</span>
      </label>

      <label class="toggle">
        <input type="checkbox" id="opt-confetti" checked>
        <span>Confettis / celebraÃ§Ã£o</span>
      </label>

      <label class="toggle">
        <input type="checkbox" id="opt-autospeak" checked>
        <span>Leitura automÃ¡tica do nÃ­vel</span>
      </label>

      <label class="toggle">
        <input type="checkbox" id="opt-sound" checked>
        <span>Som (voz + beep)</span>
      </label>
    </div>

    <div class="modal-section">
      <div class="field">
        <label class="field-label" for="opt-school">ğŸ« Escola (no certificado)</label>
        <input class="field-input" id="opt-school" type="text" placeholder="Ex.: EB1/PE ..." maxlength="60">
      </div>
      <div class="field">
        <label class="field-label" for="opt-teacher-name">âœï¸ Nome do/a professor/a (no certificado)</label>
        <input class="field-input" id="opt-teacher-name" type="text" placeholder="Ex.: Prof.Âª Carla Sofia" maxlength="60">
      </div>
    
    <div class="modal-section" style="margin-top:14px">
      <div class="field">
        <label class="field-label">âœï¸ Editor de Frases (um nÃ­vel de cada vez)</label>
        <textarea id="editor-textarea" class="field-input" style="min-height:140px;resize:vertical"
        placeholder="Escreve uma frase por linha..."></textarea>
      </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center">
        <button class="intro-start secondary" type="button" onclick="loadLevelIntoEditor()">ğŸ“¥ Carregar nÃ­vel atual</button>
        <button class="intro-start" type="button" onclick="applyEditorChanges()">âœ… Aplicar alteraÃ§Ãµes</button>
      </div>
      <p class="cert-note">Cada linha corresponde a uma frase. As alteraÃ§Ãµes ficam guardadas neste computador.</p>
    </div>


    <div class="modal-actions">
      <button class="intro-start secondary" type="button" onclick="resetTeacherPin()">ğŸ”‘ Alterar PIN</button>
      <button class="intro-start" type="button" onclick="saveTeacherPanel()">ğŸ’¾ Guardar</button>
    </div>
  </div>
</div>


<!-- â•â• CELEBRATION OVERLAY â•â• -->
<div id="celebration">
  <div class="celebration-card">
    <div class="celebration-emoji" id="celeb-emoji">ğŸ‰</div>
    <div class="celebration-title" id="celeb-title">Muito bem!</div>
    <div class="celebration-msg" id="celeb-msg">Conseguiste!</div>
    <div class="celebration-stars" id="celeb-stars">â­â­â­</div>
    <button class="celebration-next" onclick="nextSentence()">
      Continuar! â¡ï¸
    </button>
  </div>
</div>

<script src="content.js"></script>
<script src="game.js" defer></script>
</body>
</html>
